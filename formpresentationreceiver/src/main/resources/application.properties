# FormPresentationReceiver microservice - Application Configuration
quarkus.application.name=formpresentationreceiver

# HTTP Configuration (different port if running on same host)
quarkus.http.port=8081

# H2 Database Configuration (separate database file)
quarkus.datasource.db-kind=h2
quarkus.datasource.username=sa
quarkus.datasource.password=
quarkus.datasource.jdbc.url=jdbc:h2:file:./data/formpresentationreceiver;AUTO_SERVER=TRUE
quarkus.datasource.jdbc.max-size=16

# Hibernate Configuration
quarkus.hibernate-orm.database.generation=update
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.sql-load-script=no-file

# RabbitMQ Configuration
rabbitmq-host=localhost
rabbitmq-port=5672
rabbitmq-username=guest
rabbitmq-password=guest

# Incoming channel configuration for form-created events
mp.messaging.incoming.form-created-in.connector=smallrye-rabbitmq
mp.messaging.incoming.form-created-in.exchange.name=form-events
mp.messaging.incoming.form-created-in.exchange.type=topic
mp.messaging.incoming.form-created-in.exchange.durable=true
mp.messaging.incoming.form-created-in.routing-keys=form.created
mp.messaging.incoming.form-created-in.queue.name=form-presentation-receiver-queue
mp.messaging.incoming.form-created-in.queue.durable=true
# Re-queue failed messages (e.g. transient DB failures) so the broker retries delivery
mp.messaging.incoming.form-created-in.failure-strategy=nack
# Dead-letter queue: messages that keep failing land here for manual inspection
mp.messaging.incoming.form-created-in.queue.x-dead-letter-exchange=form-events-dlx
mp.messaging.incoming.form-created-in.queue.x-dead-letter-routing-key=form.created.dead

# Logging
quarkus.log.level=INFO
quarkus.log.console.enable=true
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n
